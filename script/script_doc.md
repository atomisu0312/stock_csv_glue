# スクリプト実行ドキュメント

## 概要
このドキュメントでは、AWSリソースを操作するスクリプトの実行方法と仕様について説明します。

## 共通仕様

### スクリプト実行ルール
1. **引数の順序**: スクリプトは引数を順序付きで受け取ります
2. **デフォルト値**: 引数が指定されない場合は、スクリプト内で定義されたデフォルト値が使用されます
3. **エラーハンドリング**: `set -eu`により、エラー発生時は即座に終了します
4. **ログ出力**: 各処理ステップで進捗状況を標準出力に表示します

### 引数パターン
```bash
./script_name.sh [ARG1] [ARG2] [ARG3] [ARG4]
```

### 共通の引数仕様
- **第1引数**: プライマリリソース名（例：ワークグループ名、バケット名など）
- **第2引数**: AWSリージョン（デフォルト: `ap-northeast-1`）
- **第3引数** (任意) : セカンダリリソース名（例：出力バケット名など）
- **第4引数** (任意) : インデックスまたはオプション値（デフォルト: `0`）

### エラー処理
- リソースが見つからない場合はエラーメッセージを表示して終了
- AWS CLIコマンドの実行失敗時は適切なエラーメッセージを表示
- 処理の成功/失敗は明確なアイコン（✅/❌）で表示

### 出力形式
- **JSON形式**: 結果は`result.json`ファイルに保存
- **標準出力**: 進捗状況と最終結果を標準出力に表示
- **S3保存**: 必要に応じてS3バケットに結果を保存

## スクリプト例

### Athenaクエリ実行スクリプト
```bash
./run_athena_query.sh [WORKGROUP_NAME] [REGION] [BUCKET_NAME] [QUERY_INDEX]
```

**処理フロー:**

1. デフォルト値の設定
2. 本命のAPIを実行
3. 本命のAPIの完了を待機
4. 結果を取得・保存

## 開発ガイドライン

### 新しいスクリプト作成時のルール
1. **引数チェック**: 必須引数とオプション引数を明確に分離
2. **デフォルト値**: 適切なデフォルト値を設定
3. **エラーハンドリング**: 各ステップでエラーを適切に処理
4. **ログ出力**: 処理の進捗を分かりやすく表示
5. **結果保存**: 結果は適切な形式で保存

### 命名規則
- スクリプト名: `run_[service]_[action].sh`
- 変数名: 大文字のスネークケース（例：`WORKGROUP_NAME`）
- 関数名: 小文字のスネークケース（例：`get_resources`）

### コメント規約
- スクリプトの先頭に使用方法を記載
- 各処理ステップに番号付きコメントを追加
- 重要な変数や処理に説明コメントを追加
